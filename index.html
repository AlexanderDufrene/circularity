<!doctype html>

<html>
	<head>
		<meta charset="utf-8">

		<title>Operation Spark || Motion Poem</title>
		<meta name="description" content="Operation Spark Motion Poem">
		<meta name="author" content="operationspark.org">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
	    
	    <link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
	    <link href="css/style.css" rel="stylesheet">

		<!-- all core CreateJS and 3rd party libraries are listed here: -->
		<script src="bower_components/lodash/lodash.min.js"></script>
		<script src="bower_components/easeljs/lib/easeljs-0.8.0.min.js"></script>
		<script src="bower_components/PreloadJS/lib/preloadjs-0.6.0.min.js"></script>
		<script src="bower_components/SoundJS/lib/soundjs-0.6.0.min.js"></script>
		<script src="bower_components/opspark-draw/draw.js"></script>
		<script src="bower_components/racket/racket.js"></script>

	    <!-- our app javascript code -->
	    <script src="js/opspark.js"></script>
	    
	    <style type="text/css">
	    	/*override default styles here*/
	    </style>
	</head>
	<body>
		<div>
			<canvas id="canvas" width="500" height="500"></canvas>
		</div>
		<script id="motion-poem">
			(function(){
				'use strict';
				
				var 
					draw = window.opspark.draw,
					physikz = window.opspark.racket.physikz,
					num = window.opspark.racket.num,
					
					app = window.opspark.makeApp({update: update}),
					canvas = app.canvas, 
					view = app.view,
					fps = draw.fps('#999');
				
				////////////////////////////////////////////////////////////////
				// ALL CODE GOES BELOW HERE                                   //
				////////////////////////////////////////////////////////////////
				
				var i, circle, radius, line, randomColor;

				i = 0;

				while (i < 100) {
					radius = num.randomIntBetween(5, 20);
					randomColor = draw.randomColor(255, 255, 255);
					line = draw.line(-radius, 0, radius, 0, '#999', 2);
					draw.line(0, -radius, 0, radius, '#999', 2, line);
					
					// (radius, color, strokeColor, strokeStyle, xOffset, yOffset, onShape)
					circle = draw.circle(radius, randomColor, '#999', 1, null, null, line);
					circle.alpha = Math.random();

					if (circle.alpha < .2) {
						draw.blurFilterOn(circle);
					}

					circle.x = num.randomIntBetween(0, canvas.width);
					circle.y = num.randomIntBetween(0, canvas.height);
					view.addChild(circle);

					physikz.addRandomVelocity(circle, canvas);

					i++;
				}
				
				view.addChild(fps);
				app.addUpdateable(fps);
				

                function update() {						
					var circles = view.children;
					var circle;
					for (var i = 0; i < circles.length; i++) {
						circle = circles[i];
						
						physikz.updateVelocity(circle);

						if (circle.x - circle.radius > canvas.width) {
	                        circle.x = -circle.radius;
	                    } else if (circle.x + circle.radius < 0) {
	                        circle.x = canvas.width + circle.radius;
	                    } if (circle.y - circle.radius > canvas.height) {
	                        circle.y = -circle.radius;
	                    } else if (circle.y < -circle.radius) {
	                        circle.y = canvas.height + circle.radius;
	                    }
					}
                }
                
            ////////////////////////////////////////////////////////////////////
            // NO CODE BELOW HERE                                             //
			////////////////////////////////////////////////////////////////////
			})();
		</script>
	</body>

</html>